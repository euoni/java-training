apply plugin: 'eclipse'
apply plugin: 'jacoco'

allprojects {
    apply plugin: 'java'
    repositories {
        mavenCentral()
    }
    dependencies {
        compile 'junit:junit:4.+'
    }
}

dependencies {
    testCompile 'org.jmockit:jmockit:1.28'
    compile project(':jpltest')
}

jacocoTestReport {
    reports {
        xml.enabled true
    }
}

sourceSets.main.java.srcDirs = ['src']
sourceSets.test.java.srcDirs = ['test']

project(':jpltest') {
    sourceSets.main.java.srcDirs = ['.']
    sourceSets.main.java.excludes = ['jpl/']
}

def defaultEncoding = 'UTF-8'
tasks.withType(AbstractCompile).each { it.options.encoding = defaultEncoding }
tasks.withType(GroovyCompile).each { it.groovyOptions.encoding = defaultEncoding }
